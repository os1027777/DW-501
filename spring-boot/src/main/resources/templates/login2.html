<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="-1">
		<title>íšŒì› ê°€ì…</title>
		<link rel="stylesheet" href="/css/login2.css">
			<body>
				<div class="cd-main-header js-cd-main-header">
					<div id="main_ct" class="wrap">
						<div id="form">
							<h1>íšŒì›ê°€ì…</h1>
							<div class="form-container">
								<div class="form-box">
									<div class="box-title">
										<span>íšŒì› ì •ë³´</span>
									</div>
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											ê°€ì…ì ëª…
										</div>
										<input autocomplete="off" type="text" id="userName"
											style="width: 755px;">
									</div>
									<!--//box-->
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											ì—°ë½ì²˜
										</div>
										<input class="phone" id="phone" name="number" value=""
											maxlength="11" type="text" autocomplete="off" />
									</div>
									<!--//box-->
									<div class="box">
										<div class="new-password-area" style="float: left;">
											<div class="customer-new-password">
												<div class="customer-password-text">
													<div class="circle"></div>
													ë¹„ë°€ë²ˆí˜¸
												</div>
												<input autocomplete="off" type="password" id="password_1"
													class="pw">
											</div>
											<div class="customer-new-check-password"
												style="margin-bottom: 10px !important;">
												<div class="customer-password-text">
													<div class="circle"></div>
													ë¹„ë°€ë²ˆí˜¸ í™•ì¸
												</div>
												<input autocomplete="off" type="password" id="password_2"
													class="pw">
											</div>
											<div class="edit-icon-area"
												style="float: left; width: 98%; color: red; height: 50px; text-align: left; padding-left: 330px;">
												<div id="alert-danger" class="error-text"
													style="display: none;">Error Text ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
											</div>
										</div>
									</div>
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											E-mail
										</div>
										<input class="email" id="firstEmail" type="text"
											autocomplete="off"><span style="font-size: 28px;">@</span>
											<input class="str_email02" id="secondEmail" type="text">
												<select class="selectEmail" id="emailOption">
													<option value="1" selected>ì§ì ‘ì…ë ¥</option>
													<option value="naver.com">naver.com</option>
													<option value="hanmail.net">hanmail.net</option>
													<option value="hotmail.com">hotmail.com</option>
													<option value="nate.com">nate.com</option>
													<option value="gmail.com">gmail.com</option>
											</select>
									</div>
									<!--//box-->
									<div class="box-title" style="margin-top: 80px;">
										<span>ì†Œì† íšŒì‚¬ ì •ë³´</span>
									</div>
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											ì—…ì²´ ëª…
										</div>
										<input type="text" id="companyName" autocomplete="off" />
									</div>
									<!--//box-->
									<div class="box">
										<div class="input-title" style="margin-bottom: 40px;">
											<div class="circle"></div>
											ì—…ì²´ ì£¼ì†Œ
										</div>
										<input type="text" style="width: 570px; margin-bottom: 20px;"
											id="addr" autocomplete="off" />
										<button
											style="cursor: pointer; background-color: #fff; border: none;"
											onclick="getPostCode()">ìš°í¸ë²ˆí˜¸ ì°¾ê¸°</button>
										<input type="text" style="width: 755px;" id="detailAddr"
											autocomplete="off" />
									</div>
									<!--//box-->
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											ì—…ì²´ ì—°ë½ì²˜
										</div>
										<input class="phone" id="companyPhone" name="number" value=""
											maxlength="11" type="text" autocomplete="off" />
									</div>
									<!--//box-->
									<div class="box">
										<div class="input-title">
											<div class="circle"></div>
											ì—…ì²´ ì‚¬ì—…ì ë²ˆí˜¸
										</div>
										<input class="BusinessNumber" id="companyNumber" name="number"
											value="" maxlength="10" type="text" autocomplete="off" />
									</div>
								</div>
							</div>
						</div>
						<div class="join-finish-btn">
							<button class="join_btn" onclick="dojoin()">
								<span>íšŒì›ê°€ì… ì™„ë£Œ</span>
							</button>
						</div>
					</div>
					<!--//main_ct-->
				</div>
			</body>
			<script src="https://code.jquery.com/jquery-3.6.1.js"
				integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
				crossorigin="anonymous"></script>


			<script
				src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

			<script>
$("#emailOption").change(function(){
    let email = $("#emailOption option:selected").val();
    $("#secondEmail").val(email);

})

       function dojoin(){
        let doJoin = () => {
        let userId = $('#userId').val();
    
        if(userId.length < 5 || userId.length > 11){
          alert('ì•„ì´ë””ëŠ” 5ê¸€ì - 11ìì…ë‹ˆë‹¤.');
          $('#userId').focus();
          return false;
        }
     
        let userPassword = $('#userPassword').val();
        let userRePassword = $('#userRePassword').val();
        if(userPassword.length < 8){
          alert('ìµœì†Œ 8ì ì…ë‹ˆë‹¤.');
          $('#userPassword').focus();
          return false;
        }
        if(userRePassword.length < 8){
          alert('ìµœì†Œ 8ì ì…ë‹ˆë‹¤.');
          $('#userRePassword').focus();
          return false;
        }

        if(userPassword !== userRePassword){
          alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì„œë¡œ ë‹¬ë¼ìš©~ ğŸ˜¡');
          return false;
        }        if(userId === ''){
          alert('ê°’ì„ ì…ë ¥í•˜ì„¸ìš”! ğŸ˜¢');
          $('#userId').focus();
          return false;
        }
        if(userPassword === ''){
          alert('ê°’ì„ ì…ë ¥í•˜ì„¸ìš”! ğŸ˜¢');
          $('#userPassword').focus();
          return false;
        }
        if(userRePassword === ''){
          alert('ê°’ì„ ì…ë ¥í•˜ì„¸ìš”! ğŸ˜¢');
          $('#userRePassword').focus();
          return false;
        }
        let userEmail = $('#userEmail').val();
        if(userEmail === ''){
          alert('ê°’ì„ ì…ë ¥í•˜ì„¸ìš”! ğŸ˜¢');
          $('#userEmail').focus();
          return false;
        }
        //ë¬¸ì œ5. ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ë™ì˜ëŠ” ì²´í¬í•´ì•¼ í•©ë‹ˆë‹¤. 
        let loginStatus = $('#login-status').is(":checked");
        if(!loginStatus){
          alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ë™ì˜ëŠ” ì²´í¬í•´ì•¼ í•©ë‹ˆë‹¤. ');
          $('#login-status').focus();
          return false;
        }
       }
    
  
let jsonData = {
    "userName" : userName,
    "phone":phone,
    "password": password_1,
    "addr":addr,
    "companyName" : companyName,
    "email" :firstEmail+"@"+secondEmail,
    "companyPhone" : companyPhone,
    "companyNumber" : companyNumber
}
doSubmit(jsonData);
};

function doSubmit(data){
    console.log(data);
    $.ajax({
    	url: "/api/vi/join2",
    	type : "POST",
    	contentType : "application/json", // ì„œë²„ì— json íƒ€ì…ìœ¼ë¡œ ë³´ë‚¼ ì˜ˆì •(ìš”ì²­)
    	data : JSON.stringify(data),
    	dataType : "json",
    	success: function (response){
    	console.log(response);	
        }
    });

}


        function getPostCode(){
                new daum.Postcode({
                    oncomplete: function(data) {
                        // ë„ë¡œëª… ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
                        // ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
                        var fullRoadAddr = data.roadAddress; // ë„ë¡œëª… ì£¼ì†Œ ë³€ìˆ˜
                        var extraRoadAddr = ''; // ë„ë¡œëª… ì¡°í•©í˜• ì£¼ì†Œ ë³€ìˆ˜
                        // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                        // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                        if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                            extraRoadAddr += data.bname;
                        }
                        // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                        if(data.buildingName !== '' && data.apartment === 'Y'){
                            extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                        }
                        // ë„ë¡œëª…, ì§€ë²ˆ ì¡°í•©í˜• ì£¼ì†Œê°€ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                        if(extraRoadAddr !== ''){
                            extraRoadAddr = ' (' + extraRoadAddr + ')';
                        }
                        // ë„ë¡œëª…, ì§€ë²ˆ ì£¼ì†Œì˜ ìœ ë¬´ì— ë”°ë¼ í•´ë‹¹ ì¡°í•©í˜• ì£¼ì†Œë¥¼ ì¶”ê°€í•œë‹¤.
                        if(fullRoadAddr !== ''){
                            fullRoadAddr += extraRoadAddr;
                        }
                        $('#addr').val(fullRoadAddr);
                    }
                }).open();
            }
    </script>

			</html>